<!DOCTYPE html>
<html lang="en" xmlns:th="https://thymeleaf.org">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Usuarios</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  </head>
<body>
  <section>
    <nav class="navbar navbar-expand-lg bg-dark">
      <div class="container-fluid px-5">
        <a class="navbar-brand text-white" href="#">Gestor Usuarios</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link text-white" th:href="@{/usuarios/inicio}">Inicio</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-white" th:href="@{/users}">Usuarios</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-white" th:href="@{/products}">Productos</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-white" th:href="@{/sales}">Ventas</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </section>

  <div class="container mt-5">

    <h1 class="display-4 mb-5">Nuevo Usuario</h1>
    <section id="form-section">

      <form th:action="@{/usuarios/grabar}" th:object="${Usuario}" method="POST" class="col-8 d-flex flex-column gap-4 needs-validation" novalidate>
        <div class="form-body">
          <div class="mb-3">
            <label for="nombre" class="form-label">Nombre</label>
            <input type="text" class="form-control" id="nombre" name="nombre" required />
            <div class="invalid-feedback">
              Necesita escribir un nombre...
            </div>
          </div>
          <div class="mb-3">
            <label for="rut" class="form-label">RUT</label>
            <input type="text" class="form-control" id="rut" name="rut" pattern="^(\d{1,3}(?:\.\d{1,3}){2}-[\dkK])$" required />
            <div class="invalid-feedback">
              El rut proporcionado no es válido...
            </div>
          </div>
          <div class="mb-3">
            <label for="clave" class="form-label">Clave</label>
            <input type="password" class="form-control" id="clave" name="clave" min="10" required />
            <div class="invalid-feedback">
              La clave no es los bastante segura...
            </div>
          </div>
          <div class="mb-3">
            <label for="correo" class="form-label">Correo electrónico</label>
            <input type="email" class="form-control" id="correo" name="correo" required />
            <div class="invalid-feedback">
              El correo ingresado no es válido o ya existe...
            </div>
          </div>
          <div class="mb-3">
            <label for="usuario" class="form-label">Nombre de usuario</label>
            <div class="input-group mb-3">
              <span class="input-group-text" id="basic-addon1">@</span>
              <input type="text" class="form-control" aria-label="usuario" aria-describedby="basic-addon1" id="usuario" name="usuario" required />
              <div class="invalid-feedback">
                El USER ya existe...
              </div>
            </div>
          </div>
        </div>
        <button class="btn btn-dark" type="submit" style="width: fit-content;">Nuevo Usuario</button>
        <!-- Aqui deberia ir un boton de volver -->
      </form>

    </section>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Example starter JavaScript for disabling form submissions if there are invalid fields
    (() => {
      'use strict'

      // Fetch all the forms we want to apply custom Bootstrap validation styles to
      const forms = document.querySelectorAll('.needs-validation')

      // Loop over them and prevent submission
      Array.from(forms).forEach(form => {
        form.addEventListener('submit', event => {
          if (!form.checkValidity()) {
            event.preventDefault()
            event.stopPropagation()
          }

          form.classList.add('was-validated')
        }, false)
      })
    })()
  </script>
</body>
</html>